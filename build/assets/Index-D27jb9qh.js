import{r as c,j as e,$ as p,S as g}from"./app-sGPDzOdj.js";import{A as $,f as D}from"./Admin-BTNIfvca.js";import{r,F as A,a as h,b as B,c as F}from"./index-q4uN7DkW.js";import{M as R,S as I,D as W}from"./DangerButton-D5Sma0dt.js";import"./NavLink-B_sBopIA.js";import"./transition-D544M8uy.js";function P({expenses:a,queryParams:l,success:n,updateMsg:o,deleteMsg:i}){l=l||"";const[x,v]=c.useState();console.log("expenses",a);const w=s=>{s.key==="Enter"&&b()},T=s=>{v(s.target.value)},b=()=>{const s={...l};/^\d+$/.test(x)?(s.id=x,delete s.title):(s.title=x,delete s.id),g.get(route("expenses.index",s))},f=s=>{const t={...l};s===l.sort_field?(console.log("passed suckjdfhgllyy"),t.sort_direction==="desc"?t.sort_direction="asc":t.sort_direction="desc"):(t.sort_field=s,t.sort_direction="desc"),g.get(route("expenses.index",t))},[m,y]=c.useState(!!n||!!i||!!o);c.useEffect(()=>{if(n||i||o){y(!0);const s=setTimeout(()=>{y(!1)},5e3);return()=>clearTimeout(s)}},[n,i,o]);const[C,j]=c.useState(!1),[S,N]=c.useState(null),k=s=>{j(!0),N(s)},u=()=>{j(!1),N(null)},E=s=>{if(!s||!s.id){alert("Error: No expense selected");return}console.log("Deleting expense:",s),g.delete(route("expenses.destroy",s.id)),u()},_=(s,t)=>s.length>t?s.substring(0,t)+"...":s;return e.jsx(e.Fragment,{children:e.jsxs($,{children:[n&&e.jsx("div",{className:`bg-emerald-500 py-2 px-4 rounded text-gray-100 transition-opacity duration-1000 ${m?"opacity-100":"opacity-0"}`,children:n}),i&&e.jsx("div",{className:`bg-emerald-500 py-2 px-4 rounded text-gray-100 transition-opacity duration-1000 ${m?"opacity-100":"opacity-0"}`,children:i}),o&&e.jsx("div",{className:`bg-emerald-500 py-2 px-4 rounded text-gray-100 transition-opacity duration-1000 ${m?"opacity-100":"opacity-0"}`,children:o}),e.jsx("div",{className:"flex flex-wrap",children:e.jsx("div",{className:"w-full mb-12 px-4",children:e.jsxs(r.Card,{className:"h-full w-full",children:[e.jsxs(r.CardHeader,{floated:!1,shadow:!1,className:"rounded-none",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-8",children:[e.jsx("div",{}),e.jsx("div",{className:"flex shrink-0 flex-col gap-2 sm:flex-row",children:e.jsx(r.Button,{className:"flex items-center gap-3 bg-gray-900",size:"sm",children:e.jsxs(p,{href:route("expenses.create"),className:"flex items-center",children:[e.jsx(A,{strokeWidth:2,className:"h-4 w-4"})," Add expense"]})})})]}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-max",children:[e.jsx(r.Typography,{variant:"h5",color:"blue-gray",children:"Expenses list"}),e.jsx(r.Typography,{color:"gray",className:"mt-1 font-normal",children:"See information about all expenses"})]}),e.jsx("div",{className:"w-full md:w-72",children:e.jsxs("div",{class:"relative",children:[e.jsx("input",{type:"text",value:x,onChange:T,class:"w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md pl-3 pr-28 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow",placeholder:"Search by title",onKeyDown:w}),e.jsxs("button",{class:"absolute top-1 right-1 flex items-center rounded bg-slate-800 py-1 px-2.5 border border-transparent text-center text-sm text-white transition-all shadow-sm hover:shadow focus:bg-slate-700 focus:shadow-none active:bg-slate-700 hover:bg-slate-700 active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",onClick:b,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2",children:e.jsx("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z","clip-rule":"evenodd"})}),"Search"]})]})})]})]}),e.jsx(r.CardBody,{className:"overflow-scroll px-0",children:e.jsxs("table",{className:"mt-4 w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(r.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Id"}),e.jsx(h,{onClick:()=>f("id"),name:"id",strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(r.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Title"}),e.jsx(h,{onClick:()=>f("title"),name:"title",strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(r.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Amount"}),e.jsx(h,{strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(r.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Created at"}),e.jsx(h,{strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsx(r.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Action"})})})]})}),e.jsx("tbody",{children:a.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-6",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:`inline-flex items-center rounded-md border border-transparent bg-red-600\r
                                                            px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white \r
                                                            transition duration-150 ease-in-out hover:bg-red-500 focus:outline-none focus:ring-2\r
                                                            focus:ring-red-500 focus:ring-offset-2 active:bg-red-700`,children:"No Expense found !!"})})})}):a.data.map(s=>{const d=s===a.length-1?"p-4":"p-4 border-b border-blue-gray-50";return e.jsxs("tr",{children:[e.jsx("td",{className:d,children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex flex-col",children:e.jsx(r.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:s.id})})})}),e.jsx("td",{className:d,children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex flex-col",children:e.jsx(r.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:_(s.title,20)})})})}),e.jsx("td",{className:d,children:e.jsx("div",{className:"flex flex-col",children:e.jsxs(r.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:[D(s.amount),e.jsx("span",{className:"ml-1 px-1 py-0.5 bg-gray-200 text-gray-500 text-[10px] rounded-full",children:"PKR"})]})})}),e.jsx("td",{className:d,children:e.jsx(r.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:s.created_at})}),e.jsx("td",{className:d,children:e.jsxs("div",{children:[e.jsx(r.Tooltip,{content:"Delete User",children:e.jsx(r.IconButton,{onClick:K=>k(s),variant:"text",children:e.jsx(B,{className:"h-6 w-6 text-red-500"})})}),e.jsx(r.Tooltip,{content:"Edit User",children:e.jsx(r.IconButton,{variant:"text",children:e.jsx(p,{href:route("expenses.edit",s),children:e.jsx(F,{className:"h-6 w-6"})})})})]})})]},s.id)})})]})}),e.jsxs(r.CardFooter,{className:"flex items-center justify-between border-t border-blue-gray-50 p-4",children:[e.jsxs(r.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:["Page ",a.meta.current_page," of ",a.meta.last_page]}),e.jsx("div",{className:"flex gap-2",children:a.meta.links.map(s=>e.jsx(p,{preserveScroll:!0,href:s.url||"",className:"inline-block py-2 px-3 rounded-lg  border-t border-blue-gray-50"+(s.active?"bg-gray-950 ":" ")+(s.url?"hover:bg-gray-950 hover:text-gray-100":"text-gray-500 cursor-not-allowed "),dangerouslySetInnerHTML:{__html:s.label}},s.label))})]})]})})}),e.jsx(R,{show:C,onClose:u,children:e.jsxs("div",{className:"p-6 pointer-events-auto",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Are you sure you want to delete this expense?"}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(I,{onClick:u,children:"Cancel"}),e.jsx(W,{onClick:()=>E(S),className:"ms-3",children:"Delete Expense"})]})]})})]})})}export{P as default};
