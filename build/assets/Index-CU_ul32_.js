import{r as h,j as e,$ as u,S as b}from"./app-sGPDzOdj.js";import{A as R,f as y}from"./Admin-BTNIfvca.js";import{r as a,F as B,a as t,b as E,c as F}from"./index-q4uN7DkW.js";import{M as A,S as K,D as I}from"./DangerButton-D5Sma0dt.js";import"./NavLink-B_sBopIA.js";import"./transition-D544M8uy.js";function V({sales:l,queryParams:n,success:i,updateMsg:c,deleteMsg:d}){n=n||"";const[x,S]=h.useState();console.log("sales",l);const k=s=>{s.key==="Enter"&&f()},C=s=>{S(s.target.value)},f=()=>{const s={...n};/^\d+$/.test(x)?(s.id=x,delete s.product_id):(s.product_id=x,delete s.id),b.get(route("sales.index",s))},m=s=>{const o={...n};s===n.sort_field?(console.log("passed suckjdfhgllyy"),o.sort_direction==="desc"?o.sort_direction="asc":o.sort_direction="desc"):(o.sort_field=s,o.sort_direction="desc"),b.get(route("sales.index",o))},[p,j]=h.useState(!!i||!!d||!!c);h.useEffect(()=>{if(i||d||c){j(!0);const s=setTimeout(()=>{j(!1)},5e3);return()=>clearTimeout(s)}},[i,d,c]);const[_,N]=h.useState(!1),[W,w]=h.useState(null),$=s=>{N(!0),w(s)},g=()=>{N(!1),w(null)},D=s=>{if(!s||!s.id){alert("Error: No sale selected");return}console.log("Deleting sale:",s),b.delete(route("sales.destroy",s.id)),g()};return e.jsx(e.Fragment,{children:e.jsxs(R,{children:[i&&e.jsx("div",{className:`bg-emerald-500 py-2 px-4 rounded text-gray-100 transition-opacity duration-1000 ${p?"opacity-100":"opacity-0"}`,children:i}),d&&e.jsx("div",{className:`bg-emerald-500 py-2 px-4 rounded text-gray-100 transition-opacity duration-1000 ${p?"opacity-100":"opacity-0"}`,children:d}),c&&e.jsx("div",{className:`bg-emerald-500 py-2 px-4 rounded text-gray-100 transition-opacity duration-1000 ${p?"opacity-100":"opacity-0"}`,children:c}),e.jsx("div",{className:"flex flex-wrap",children:e.jsx("div",{className:"w-full mb-12 px-4",children:e.jsxs(a.Card,{className:"h-full w-full",children:[e.jsxs(a.CardHeader,{floated:!1,shadow:!1,className:"rounded-none",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-8",children:[e.jsx("div",{}),e.jsx("div",{className:"flex shrink-0 flex-col gap-2 sm:flex-row",children:e.jsx(a.Button,{className:"flex items-center gap-3 bg-gray-900",size:"sm",children:e.jsxs(u,{href:route("sales.create"),className:"flex items-center",children:[e.jsx(B,{strokeWidth:2,className:"h-4 w-4"})," Add sale"]})})})]}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-max",children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:"Sales list"}),e.jsx(a.Typography,{color:"gray",className:"mt-1 font-normal",children:"See information about all sales"})]}),e.jsx("div",{className:"w-full md:w-72",children:e.jsxs("div",{class:"relative",children:[e.jsx("input",{type:"text",value:x,onChange:C,class:"w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md pl-3 pr-28 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow",placeholder:"Search by product name",onKeyDown:k}),e.jsxs("button",{class:"absolute top-1 right-1 flex items-center rounded bg-slate-800 py-1 px-2.5 border border-transparent text-center text-sm text-white transition-all shadow-sm hover:shadow focus:bg-slate-700 focus:shadow-none active:bg-slate-700 hover:bg-slate-700 active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",onClick:f,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2",children:e.jsx("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z","clip-rule":"evenodd"})}),"Search"]})]})})]})]}),e.jsx(a.CardBody,{className:"overflow-scroll px-0",children:e.jsxs("table",{className:"mt-4 w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(a.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Id"}),e.jsx(t,{onClick:()=>m("id"),name:"id",strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(a.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Product"}),e.jsx(t,{onClick:()=>m("product"),name:"product",strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(a.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Staff"}),e.jsx(t,{onClick:()=>m("staff"),name:"staff",strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(a.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Quantity"}),e.jsx(t,{strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(a.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Price per unit"}),e.jsx(t,{strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(a.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Total price"}),e.jsx(t,{strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(a.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Commission"}),e.jsx(t,{strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(a.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Created at"}),e.jsx(t,{strokeWidth:2,className:"h-4 w-4 text-white"})]})}),e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(a.Typography,{variant:"small",className:"flex items-center justify-between gap-2 font-bold leading-none",children:[e.jsx("h2",{className:"bg-slate-800  text-white p-3 rounded",children:"Action"}),e.jsx(t,{strokeWidth:2,className:"h-4 w-4 text-white"})]})})]})}),e.jsx("tbody",{children:l.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"py-6",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:`inline-flex items-center rounded-md border border-transparent bg-red-600\r
                                                            px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white \r
                                                            transition duration-150 ease-in-out hover:bg-red-500 focus:outline-none focus:ring-2\r
                                                            focus:ring-red-500 focus:ring-offset-2 active:bg-red-700`,children:"No product found !!"})})})}):l.data.map(s=>{var v,T;const r=s===l.length-1?"p-4":"p-4 border-b border-blue-gray-50";return e.jsxs("tr",{children:[e.jsx("td",{className:r,children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex flex-col",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:s.id})})})}),e.jsx("td",{className:r,children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex flex-col",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:(v=s.product)==null?void 0:v.name})})})}),e.jsx("td",{className:r,children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex flex-col",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:(T=s.staff)==null?void 0:T.name})})})}),e.jsx("td",{className:r,children:e.jsx("div",{className:"flex flex-col",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:s.quantity})})}),e.jsx("td",{className:r,children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:[y(s.price_per_unit),e.jsx("span",{className:"ml-1 px-1 py-0.5 bg-gray-200 text-gray-500 text-[10px] rounded-full",children:"PKR"})]})}),e.jsx("td",{className:r,children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:[y(s.total_price),e.jsx("span",{className:"ml-1 px-1 py-0.5 bg-gray-200 text-gray-500 text-[10px] rounded-full",children:"PKR"})]})}),e.jsx("td",{className:r,children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:[y(s.commission),e.jsx("span",{className:"ml-1 px-1 py-0.5 bg-gray-200 text-gray-500 text-[10px] rounded-full",children:"PKR"})]})}),e.jsx("td",{className:r,children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:s.created_at})}),e.jsx("td",{className:r,children:e.jsxs("div",{children:[e.jsx(a.Tooltip,{content:"Delete User",children:e.jsx(a.IconButton,{onClick:P=>$(s),variant:"text",children:e.jsx(E,{className:"h-6 w-6 text-red-500"})})}),e.jsx(a.Tooltip,{content:"Edit User",children:e.jsx(a.IconButton,{variant:"text",children:e.jsx(u,{href:route("sales.edit",s),children:e.jsx(F,{className:"h-6 w-6"})})})})]})})]},s.id)})})]})}),e.jsxs(a.CardFooter,{className:"flex items-center justify-between border-t border-blue-gray-50 p-4",children:[e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:["Page ",l.meta.current_page," of ",l.meta.last_page]}),e.jsx("div",{className:"flex gap-2",children:l.meta.links.map(s=>e.jsx(u,{preserveScroll:!0,href:s.url||"",className:"inline-block py-2 px-3 rounded-lg  border-t border-blue-gray-50"+(s.active?"bg-gray-950 ":" ")+(s.url?"hover:bg-gray-950 hover:text-gray-100":"text-gray-500 cursor-not-allowed "),dangerouslySetInnerHTML:{__html:s.label}},s.label))})]})]})})}),e.jsx(A,{show:_,onClose:g,children:e.jsxs("div",{className:"p-6 pointer-events-auto",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Are you sure you want to delete this sale?"}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(K,{onClick:g,children:"Cancel"}),e.jsx(I,{onClick:()=>D(W),className:"ms-3",children:"Delete Sale"})]})]})})]})})}export{V as default};
